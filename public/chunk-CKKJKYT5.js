import{a as or,d as ce,f as Pt,g as Ge,h as Ke,i as Ve,j as Xe,k as Ye,l as Qe,m as ar,n as lr,o as Ze,p as cr}from"./chunk-2E6EQHOL.js";import{b as ur,c as hr,f as As,g as dr}from"./chunk-LJ5XHLMQ.js";import{$a as J,Da as le,Ea as We,Pa as w,Qa as b,R as ze,Sa as $,Ya as x,Za as ir,_a as nr,ab as H,bb as z,ta as O,ya as B}from"./chunk-ZMLD5V2C.js";import{d as F,f as Ts,g as Cs,h}from"./chunk-FK42CRUA.js";var Ut=F(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});var $t=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Lt.default=$t});var Dt=F(Se=>{"use strict";var _r=Se&&Se.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Se,"__esModule",{value:!0});var Rs=_r((dr(),Cs(As))),js=_r(Ut()),Mt=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Rs.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(n=>h(this,null,function*(){var o,a,l;let c=null,u=null,d=null,p=n.status,f=n.statusText;if(n.ok){if(this.method!=="HEAD"){let T=yield n.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=T:u=JSON.parse(T))}let _=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(a=n.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");_&&v&&v.length>1&&(d=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,p=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{let _=yield n.text();try{c=JSON.parse(_),Array.isArray(c)&&n.status===404&&(u=[],c=null,p=200,f="OK")}catch{n.status===404&&_===""?(p=204,f="No Content"):c={message:_}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,p=200,f="OK"),c&&this.shouldThrowOnError)throw new js.default(c)}return{error:c,data:u,count:d,status:p,statusText:f}}));return this.shouldThrowOnError||(s=s.catch(n=>{var o,a,l;return{error:{message:`${(o=n?.name)!==null&&o!==void 0?o:"FetchError"}: ${n?.message}`,details:`${(a=n?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=n?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}};Se.default=Mt});var qt=F(Te=>{"use strict";var Ps=Te&&Te.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Te,"__esModule",{value:!0});var Is=Ps(Dt()),Nt=class extends Is.default{select(t){let e=!1,r=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}={}){let o=n?`${n}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:s=r}={}){let n=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:o="text"}={}){var a;let l=[t?"analyze":null,e?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Te.default=Nt});var it=F(Ce=>{"use strict";var $s=Ce&&Ce.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ce,"__esModule",{value:!0});var Ls=$s(qt()),Ft=class extends Ls.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:s}={}){let n="";s==="plain"?n="pl":s==="phrase"?n="ph":s==="websearch"&&(n="w");let o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${n}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};Ce.default=Ft});var Jt=F(Oe=>{"use strict";var Us=Oe&&Oe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Oe,"__esModule",{value:!0});var Ae=Us(it()),Bt=class{constructor(t,{headers:e={},schema:r,fetch:s}){this.url=t,this.headers=e,this.schema=r,this.fetch=s}select(t,{head:e=!1,count:r}={}){let s=e?"HEAD":"GET",n=!1,o=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Ae.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){let s="POST",n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),e&&n.push(`count=${e}`),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(t)){let o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){let a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ae.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){let o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){let c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ae.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),e&&s.push(`count=${e}`),this.headers.Prefer=s.join(","),new Ae.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ae.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Oe.default=Bt});var vr=F(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.version=void 0;nt.version="0.0.0-automated"});var yr=F(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.DEFAULT_HEADERS=void 0;var Ms=vr();ot.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Ms.version}`}});var br=F(Re=>{"use strict";var wr=Re&&Re.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Re,"__esModule",{value:!0});var Ds=wr(Jt()),Ns=wr(it()),qs=yr(),Ht=class i{constructor(t,{headers:e={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},qs.DEFAULT_HEADERS),e),this.schemaName=r,this.fetch=s}from(t){let e=new URL(`${this.url}/${t}`);return new Ds.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new i(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:s=!1,count:n}={}){let o,a=new URL(`${this.url}/rpc/${t}`),l;r||s?(o=r?"HEAD":"GET",Object.entries(e).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",l=e);let c=Object.assign({},this.headers);return n&&(c.Prefer=`count=${n}`),new Ns.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Re.default=Ht});var Ar=F(S=>{"use strict";var he=S&&S.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(S,"__esModule",{value:!0});S.PostgrestError=S.PostgrestBuilder=S.PostgrestTransformBuilder=S.PostgrestFilterBuilder=S.PostgrestQueryBuilder=S.PostgrestClient=void 0;var kr=he(br());S.PostgrestClient=kr.default;var xr=he(Jt());S.PostgrestQueryBuilder=xr.default;var Er=he(it());S.PostgrestFilterBuilder=Er.default;var Sr=he(qt());S.PostgrestTransformBuilder=Sr.default;var Tr=he(Dt());S.PostgrestBuilder=Tr.default;var Cr=he(Ut());S.PostgrestError=Cr.default;S.default={PostgrestClient:kr.default,PostgrestQueryBuilder:xr.default,PostgrestFilterBuilder:Er.default,PostgrestTransformBuilder:Sr.default,PostgrestBuilder:Tr.default,PostgrestError:Cr.default}});var ue=class i{constructor(t,e){this.router=t;this.activeModal=e}titulo="Error";mensaje="Error";goTo(t){this.router.navigate([t])}static \u0275fac=function(e){return new(e||i)(B(ce),B(lr))};static \u0275cmp=le({type:i,selectors:[["app-modal-msj-error"]],inputs:{titulo:"titulo",mensaje:"mensaje"},decls:11,vars:2,consts:[[1,"modal-content","custom-modal-content"],[1,"modal-header","custom-modal-header"],[1,"modal-title"],["type","button",1,"custom-close",3,"click"],[1,"modal-body","custom-modal-body"],[1,"modal-footer","custom-modal-footer"],["type","button",1,"btn","btn-volver",3,"click"]],template:function(e,r){e&1&&(w(0,"div",0)(1,"div",1)(2,"h5",2),x(3),b(),w(4,"button",3),$("click",function(){return r.activeModal.dismiss("")}),x(5,"X"),b()(),w(6,"div",4),x(7),b(),w(8,"div",5)(9,"button",6),$("click",function(){return r.activeModal.close()}),x(10," Volver "),b()()()),e&2&&(O(3),ir(r.titulo),O(4),nr(" ",r.mensaje," "))},styles:[".custom-modal-content[_ngcontent-%COMP%]{background-color:#010b15;color:#fff;border:none;border-radius:.5rem}.custom-modal-header[_ngcontent-%COMP%]{background-color:#09252c;color:#b39353;display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:none}.custom-modal-body[_ngcontent-%COMP%]{background-color:#09252c;color:#fff;padding:1rem 1.5rem}.custom-modal-footer[_ngcontent-%COMP%]{background-color:#09252c;display:flex;justify-content:flex-end;padding:1rem 1.5rem;border-top:none}.btn-volver[_ngcontent-%COMP%]{background-color:#b39353;color:#010b15;border:none;padding:.5rem 1.5rem;cursor:pointer;border-radius:.25rem;transition:all .3s ease}.btn-volver[_ngcontent-%COMP%]:hover{background-color:#51db84;color:#010b15;transform:scale(1.05)}.custom-close[_ngcontent-%COMP%]{background:#1c4549;border:1px solid #b39353;color:#b39353;font-size:1.5rem;cursor:pointer;line-height:1;padding:.5rem 1rem;border-radius:.25rem}.custom-close[_ngcontent-%COMP%]:hover{color:#51db84;border-color:#51db84}"]})};var gr=i=>{let t;return i?t=i:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var xe=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},tt=class extends xe{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},rt=class extends xe{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},st=class extends xe{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},It=function(i){return i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2",i}(It||{});var Os=function(i,t,e,r){function s(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?n(u.value):s(u.value).then(a,l)}c((r=r.apply(i,t||[])).next())})},Ee=class{constructor(t,{headers:e={},customFetch:r,region:s=It.Any}={}){this.url=t,this.headers=e,this.region=s,this.fetch=gr(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return Os(this,void 0,void 0,function*(){try{let{headers:s,method:n,body:o}=e,a={},{region:l}=e;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));let u=yield this.fetch(`${this.url}/${t}`,{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(y=>{throw new tt(y)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new rt(u);if(!u.ok)throw new st(u);let p=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return p==="application/json"?f=yield u.json():p==="application/octet-stream"?f=yield u.blob():p==="text/event-stream"?f=u:p==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}};var Or=Ts(Ar(),1),{PostgrestClient:Rr,PostgrestQueryBuilder:zi,PostgrestFilterBuilder:Wi,PostgrestTransformBuilder:Gi,PostgrestBuilder:Ki,PostgrestError:Fs}=Or.default;var jr="2.11.2";var Pr={"X-Client-Info":`realtime-js/${jr}`},Ir="1.0.0",at=1e4,$r=1e3,de=function(i){return i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed",i}(de||{}),A=function(i){return i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving",i}(A||{}),R=function(i){return i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token",i}(R||{}),zt=function(i){return i.websocket="websocket",i}(zt||{}),X=function(i){return i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed",i}(X||{});var lt=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let s=e.getUint8(1),n=e.getUint8(2),o=this.HEADER_LENGTH+2,a=r.decode(t.slice(o,o+s));o=o+s;let l=r.decode(t.slice(o,o+n));o=o+n;let c=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}};var fe=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var k=function(i){return i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange",i}(k||{}),Gt=(i,t,e={})=>{var r;let s=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((n,o)=>(n[o]=Bs(o,i,t,s),n),{})},Bs=(i,t,e,r)=>{let s=t.find(a=>a.name===i),n=s?.type,o=e[i];return n&&!r.includes(n)?Lr(n,o):Wt(o)},Lr=(i,t)=>{if(i.charAt(0)==="_"){let e=i.slice(1,i.length);return Ws(t,e)}switch(i){case k.bool:return Js(t);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return Hs(t);case k.json:case k.jsonb:return zs(t);case k.timestamp:return Gs(t);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:return Wt(t);default:return Wt(t)}},Wt=i=>i,Js=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Hs=i=>{if(typeof i=="string"){let t=parseFloat(i);if(!Number.isNaN(t))return t}return i},zs=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(t){return console.log(`JSON parse error: ${t}`),i}return i},Ws=(i,t)=>{if(typeof i!="string")return i;let e=i.length-1,r=i[e];if(i[0]==="{"&&r==="}"){let n,o=i.slice(1,e);try{n=JSON.parse("["+o+"]")}catch{n=o?o.split(","):[]}return n.map(a=>Lr(t,a))}return i},Gs=i=>typeof i=="string"?i.replace(" ","T"):i,ct=i=>{let t=i;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var pe=class{constructor(t,e,r={},s=at){this.channel=t,this.event=e,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var je=class i{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{let{onJoin:n,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=i.syncState(this.state,s,n,o),this.pendingDiffs.forEach(l=>{this.state=i.syncDiff(this.state,l,n,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{let{onJoin:n,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=i.syncDiff(this.state,s,n,o),a())}),this.onJoin((s,n,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:n,newPresences:o})}),this.onLeave((s,n,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:n,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,s){let n=this.cloneDeep(t),o=this.transformState(e),a={},l={};return this.map(n,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{let d=n[c];if(d){let p=u.map(v=>v.presence_ref),f=d.map(v=>v.presence_ref),y=u.filter(v=>f.indexOf(v.presence_ref)<0),_=d.filter(v=>p.indexOf(v.presence_ref)<0);y.length>0&&(a[c]=y),_.length>0&&(l[c]=_)}else a[c]=u}),this.syncDiff(n,{joins:a,leaves:l},r,s)}static syncDiff(t,e,r,s){let{joins:n,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(n,(a,l)=>{var c;let u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){let d=t[a].map(f=>f.presence_ref),p=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...p)}r(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;let u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let s=t[r];return"metas"in s?e[r]=s.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):e[r]=s,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var W=function(i){return i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR",i}(W||{});var Pe=class i{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=A.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new pe(this,R.join,this.params,this.timeout),this.rejoinTimer=new fe(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=A.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=A.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=A.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=A.errored,this.rejoinTimer.scheduleTimeout())}),this._on(R.reply,{},(s,n)=>{this._trigger(this._replyEventName(n),s)}),this.presence=new je(this),this.broadcastEndpointURL=ct(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:n,presence:o,private:a}}=this.params;this._onError(u=>t?.(W.CHANNEL_ERROR,u)),this._onClose(()=>t?.(W.CLOSED));let l={},c={broadcast:n,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",d=>h(this,[d],function*({postgres_changes:u}){var p;if(this.socket.setAuth(),u===void 0){t?.(W.SUBSCRIBED);return}else{let f=this.bindings.postgres_changes,y=(p=f?.length)!==null&&p!==void 0?p:0,_=[];for(let v=0;v<y;v++){let T=f[v],{filter:{event:D,schema:N,table:P,filter:q}}=T,ae=u&&u[v];if(ae&&ae.event===D&&ae.schema===N&&ae.table===P&&ae.filter===q)_.push(Object.assign(Object.assign({},T),{id:ae.id}));else{this.unsubscribe(),t?.(W.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(W.SUBSCRIBED);return}})).receive("error",u=>{t?.(W.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t?.(W.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return h(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,r){return this._on(t,e,r)}send(r){return h(this,arguments,function*(t,e={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){let{event:o,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{let u=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=e.timeout)!==null&&s!==void 0?s:this.timeout);return yield(n=u.body)===null||n===void 0?void 0:n.cancel(),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;let u=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=A.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(R.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let s=new pe(this,R.leave,{},t);s.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}_fetchWithTimeout(t,e,r){return h(this,null,function*(){let s=new AbortController,n=setTimeout(()=>s.abort(),r),o=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:s.signal}));return clearTimeout(n),o})}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new pe(this,t,e,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var s,n;let o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=R;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,e,r);if(e&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var y,_,v;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(_=f.filter)===null||_===void 0?void 0:_.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(f=>f.callback(p,r)):(n=this.bindings[o])===null||n===void 0||n.filter(f=>{var y,_,v,T,D,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){let P=f.id,q=(y=f.filter)===null||y===void 0?void 0:y.event;return P&&((_=e.ids)===null||_===void 0?void 0:_.includes(P))&&(q==="*"||q?.toLocaleLowerCase()===((v=e.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{let P=(D=(T=f?.filter)===null||T===void 0?void 0:T.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return P==="*"||P===((N=e?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof p=="object"&&"ids"in p){let y=p.data,{schema:_,table:v,commit_timestamp:T,type:D,errors:N}=y;p=Object.assign(Object.assign({},{schema:_,table:v,commit_timestamp:T,eventType:D,new:{},old:{},errors:N}),this._getPayloadRecords(y))}f.callback(p,r)})}_isClosed(){return this.state===A.closed}_isJoined(){return this.state===A.joined}_isJoining(){return this.state===A.joining}_isLeaving(){return this.state===A.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let s=t.toLocaleLowerCase(),n={type:s,filter:e,callback:r};return this.bindings[s]?this.bindings[s].push(n):this.bindings[s]=[n],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var n;return!(((n=s.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===r&&i.isEqual(s.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(R.close,{},t)}_onError(t){this._on(R.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=A.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Gt(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Gt(t.columns,t.old_record)),e}};var Vs=()=>{},Xs=typeof WebSocket<"u",Ys=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Ie=class{constructor(t,e){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Pr,this.params={},this.timeout=at,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Vs,this.conn=null,this.sendBuffer=[],this.serializer=new lt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...a)=>import("./chunk-BX7VDEVO.js").then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${zt.websocket}`,this.httpEndpoint=ct(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let s=(r=e?.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=e?.encode?e.encode:(n,o)=>o(JSON.stringify(n)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new fe(()=>h(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Xs){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Kt(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-BBCAVWXX.js").then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ir}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(t){return h(this,null,function*(){let e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return h(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t})}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case de.connecting:return X.Connecting;case de.open:return X.Open;case de.closing:return X.Closing;default:return X.Closed}}isConnected(){return this.connectionState()===X.Open}channel(t,e={config:{}}){let r=new Pe(`realtime:${t}`,e,this);return this.channels.push(r),r}push(t){let{topic:e,event:r,payload:s,ref:n}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${r} (${n})`,s),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t=null){return h(this,null,function*(){let e=t||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;if(e){let r=null;try{r=JSON.parse(atob(e.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=e,this.channels.forEach(s=>{e&&s.updateJoinPayload({access_token:e}),s.joinedOnce&&s._isJoined()&&s._push(R.access_token,{access_token:e})})}})}sendHeartbeat(){return h(this,null,function*(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close($r,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}})}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:r,event:s,payload:n,ref:o}=e;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,n),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,n,o)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}_onConnOpen(){return h(this,null,function*(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(R.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",s=new URLSearchParams(e);return`${t}${r}${s}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([Ys],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}};var Kt=class{constructor(t,e,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=de.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}};var me=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function E(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var ut=class extends me{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Y=class extends me{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var Qs=function(i,t,e,r){function s(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?n(u.value):s(u.value).then(a,l)}c((r=r.apply(i,t||[])).next())})},dt=i=>{let t;return i?t=i:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},Ur=()=>Qs(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-BX7VDEVO.js")).Response:Response}),ht=i=>{if(Array.isArray(i))return i.map(e=>ht(e));if(typeof i=="function"||i!==Object(i))return i;let t={};return Object.entries(i).forEach(([e,r])=>{let s=e.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));t[s]=ht(r)}),t};var Q=function(i,t,e,r){function s(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?n(u.value):s(u.value).then(a,l)}c((r=r.apply(i,t||[])).next())})},Vt=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Zs=(i,t,e)=>Q(void 0,void 0,void 0,function*(){let r=yield Ur();i instanceof r&&!e?.noResolveJson?i.json().then(s=>{t(new ut(Vt(s),i.status||500))}).catch(s=>{t(new Y(Vt(s),s))}):t(new Y(Vt(i),i))}),ei=(i,t,e,r)=>{let s={method:i,headers:t?.headers||{}};return i==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t?.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),e))};function $e(i,t,e,r,s,n){return Q(this,void 0,void 0,function*(){return new Promise((o,a)=>{i(e,ei(t,r,s,n)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Zs(l,a,r))})})}function ge(i,t,e,r){return Q(this,void 0,void 0,function*(){return $e(i,"GET",t,e,r)})}function L(i,t,e,r,s){return Q(this,void 0,void 0,function*(){return $e(i,"POST",t,r,s,e)})}function Mr(i,t,e,r,s){return Q(this,void 0,void 0,function*(){return $e(i,"PUT",t,r,s,e)})}function Dr(i,t,e,r){return Q(this,void 0,void 0,function*(){return $e(i,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function ft(i,t,e,r,s){return Q(this,void 0,void 0,function*(){return $e(i,"DELETE",t,r,s,e)})}var C=function(i,t,e,r){function s(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?n(u.value):s(u.value).then(a,l)}c((r=r.apply(i,t||[])).next())})},ti={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Nr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},pt=class{constructor(t,e={},r,s){this.url=t,this.headers=e,this.bucketId=r,this.fetch=dt(s)}uploadOrUpdate(t,e,r,s){return C(this,void 0,void 0,function*(){try{let n,o=Object.assign(Object.assign({},Nr),s),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)}),l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(n=new FormData,n.append("cacheControl",o.cacheControl),l&&n.append("metadata",this.encodeMetadata(l)),n.append("",r)):typeof FormData<"u"&&r instanceof FormData?(n=r,n.append("cacheControl",o.cacheControl),l&&n.append("metadata",this.encodeMetadata(l))):(n=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s?.headers&&(a=Object.assign(Object.assign({},a),s.headers));let c=this._removeEmptyFolders(e),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:n,headers:a},o?.duplex?{duplex:o.duplex}:{})),p=yield d.json();return d.ok?{data:{path:c,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(n){if(E(n))return{data:null,error:n};throw n}})}upload(t,e,r){return C(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,s){return C(this,void 0,void 0,function*(){let n=this._removeEmptyFolders(t),o=this._getFinalPath(n),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l,c=Object.assign({upsert:Nr.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);let d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),p=yield d.json();return d.ok?{data:{path:n,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(E(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return C(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),s=Object.assign({},this.headers);e?.upsert&&(s["x-upsert"]="true");let n=yield L(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+n.url),a=o.searchParams.get("token");if(!a)throw new me("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(E(r))return{data:null,error:r};throw r}})}update(t,e,r){return C(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return C(this,void 0,void 0,function*(){try{return{data:yield L(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(E(s))return{data:null,error:s};throw s}})}copy(t,e,r){return C(this,void 0,void 0,function*(){try{return{data:{path:(yield L(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(E(s))return{data:null,error:s};throw s}})}createSignedUrl(t,e,r){return C(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),n=yield L(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${o}`)},{data:n,error:null}}catch(s){if(E(s))return{data:null,error:s};throw s}})}createSignedUrls(t,e,r){return C(this,void 0,void 0,function*(){try{let s=yield L(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),n=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${n}`):null})),error:null}}catch(s){if(E(s))return{data:null,error:s};throw s}})}download(t,e){return C(this,void 0,void 0,function*(){let s=typeof e?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(e?.transform||{}),o=n?`?${n}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield ge(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(E(a))return{data:null,error:a};throw a}})}info(t){return C(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield ge(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:ht(r),error:null}}catch(r){if(E(r))return{data:null,error:r};throw r}})}exists(t){return C(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield Dr(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(E(r)&&r instanceof Y){let s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),s=[],n=e?.download?`download=${e.download===!0?"":e.download}`:"";n!==""&&s.push(n);let a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return C(this,void 0,void 0,function*(){try{return{data:yield ft(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(E(e))return{data:null,error:e};throw e}})}list(t,e,r){return C(this,void 0,void 0,function*(){try{let s=Object.assign(Object.assign(Object.assign({},ti),e),{prefix:t||""});return{data:yield L(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(E(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var qr="2.7.1";var Fr={"X-Client-Info":`storage-js/${qr}`};var _e=function(i,t,e,r){function s(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?n(u.value):s(u.value).then(a,l)}c((r=r.apply(i,t||[])).next())})},mt=class{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},Fr),e),this.fetch=dt(r)}listBuckets(){return _e(this,void 0,void 0,function*(){try{return{data:yield ge(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(E(t))return{data:null,error:t};throw t}})}getBucket(t){return _e(this,void 0,void 0,function*(){try{return{data:yield ge(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(E(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return _e(this,void 0,void 0,function*(){try{return{data:yield L(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(E(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return _e(this,void 0,void 0,function*(){try{return{data:yield Mr(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(E(r))return{data:null,error:r};throw r}})}emptyBucket(t){return _e(this,void 0,void 0,function*(){try{return{data:yield L(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(E(e))return{data:null,error:e};throw e}})}deleteBucket(t){return _e(this,void 0,void 0,function*(){try{return{data:yield ft(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(E(e))return{data:null,error:e};throw e}})}};var Le=class extends mt{constructor(t,e={},r){super(t,e,r)}from(t){return new pt(this.url,this.headers,t,this.fetch)}};var Br="2.49.4";var Ue="";typeof Deno<"u"?Ue="deno":typeof document<"u"?Ue="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ue="react-native":Ue="node";var ri={"X-Client-Info":`supabase-js-${Ue}/${Br}`},Jr={headers:ri},Hr={schema:"public"},zr={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wr={};dr();var si=function(i,t,e,r){function s(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?n(u.value):s(u.value).then(a,l)}c((r=r.apply(i,t||[])).next())})},ii=i=>{let t;return i?t=i:typeof fetch>"u"?t=ur:t=fetch,(...e)=>t(...e)},ni=()=>typeof Headers>"u"?hr:Headers,Gr=(i,t,e)=>{let r=ii(e),s=ni();return(n,o)=>si(void 0,void 0,void 0,function*(){var a;let l=(a=yield t())!==null&&a!==void 0?a:i,c=new s(o?.headers);return c.has("apikey")||c.set("apikey",i),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(n,Object.assign(Object.assign({},o),{headers:c}))})};var oi=function(i,t,e,r){function s(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?n(u.value):s(u.value).then(a,l)}c((r=r.apply(i,t||[])).next())})};function Kr(i){return i.replace(/\/$/,"")}function Vr(i,t){let{db:e,auth:r,realtime:s,global:n}=i,{db:o,auth:a,realtime:l,global:c}=t,u={db:Object.assign(Object.assign({},o),e),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),n),accessToken:()=>oi(this,void 0,void 0,function*(){return""})};return i.accessToken?u.accessToken=i.accessToken:delete u.accessToken,u}var gt="2.69.1";var Z=30*1e3,_t=3,vt=_t*Z,Xr="http://localhost:9999",Yr="supabase.auth.token";var Qr={"X-Client-Info":`gotrue-js/${gt}`};var Me="X-Supabase-Api-Version",Xt={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Zr=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,es=6e5;var De=class extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}};function m(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}var yt=class extends De{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}};function ts(i){return m(i)&&i.name==="AuthApiError"}var ve=class extends De{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},U=class extends De{constructor(t,e,r,s){super(t,r,s),this.name=e,this.status=r}},j=class extends U{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function rs(i){return m(i)&&i.name==="AuthSessionMissingError"}var ye=class extends U{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ee=class extends U{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},te=class extends U{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function ss(i){return m(i)&&i.name==="AuthImplicitGrantRedirectError"}var Ne=class extends U{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},we=class extends U{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function wt(i){return m(i)&&i.name==="AuthRetryableFetchError"}var qe=class extends U{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}};var G=class extends U{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var is="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ns=` 	
\r=`.split(""),ai=(()=>{let i=new Array(128);for(let t=0;t<i.length;t+=1)i[t]=-1;for(let t=0;t<ns.length;t+=1)i[ns[t].charCodeAt(0)]=-2;for(let t=0;t<is.length;t+=1)i[is[t].charCodeAt(0)]=t;return i})();function os(i,t,e){let r=ai[i];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Yt(i){let t=[],e=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},n=o=>{ui(o,r,e)};for(let o=0;o<i.length;o+=1)os(i.charCodeAt(o),s,n);return t.join("")}function li(i,t){if(i<=127){t(i);return}else if(i<=2047){t(192|i>>6),t(128|i&63);return}else if(i<=65535){t(224|i>>12),t(128|i>>6&63),t(128|i&63);return}else if(i<=1114111){t(240|i>>18),t(128|i>>12&63),t(128|i>>6&63),t(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function ci(i,t){for(let e=0;e<i.length;e+=1){let r=i.charCodeAt(e);if(r>55295&&r<=56319){let s=(r-55296)*1024&65535;r=(i.charCodeAt(e+1)-56320&65535|s)+65536,e+=1}li(r,t)}}function ui(i,t,e){if(t.utf8seq===0){if(i<=127){e(i);return}for(let r=1;r<6;r+=1)if((i>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=i&31;else if(t.utf8seq===3)t.codepoint=i&15;else if(t.utf8seq===4)t.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|i&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function as(i){let t=[],e={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<i.length;s+=1)os(i.charCodeAt(s),e,r);return new Uint8Array(t)}function ls(i){let t=[];return ci(i,e=>t.push(e)),new Uint8Array(t)}function cs(i){return Math.round(Date.now()/1e3)+i}function us(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){let t=Math.random()*16|0;return(i=="x"?t:t&3|8).toString(16)})}var I=()=>typeof window<"u"&&typeof document<"u",re={tested:!1,writable:!1},V=()=>{if(!I())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(re.tested)return re.writable;let i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),re.tested=!0,re.writable=!0}catch{re.tested=!0,re.writable=!1}return re.writable};function hs(i){let t={},e=new URL(i);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((s,n)=>{t[n]=s})}catch{}return e.searchParams.forEach((r,s)=>{t[s]=r}),t}var bt=i=>{let t;return i?t=i:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},ds=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Qt=(i,t,e)=>h(void 0,null,function*(){yield i.setItem(t,JSON.stringify(e))}),Be=(i,t)=>h(void 0,null,function*(){let e=yield i.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),Je=(i,t)=>h(void 0,null,function*(){yield i.removeItem(t)}),Fe=class i{constructor(){this.promise=new i.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};Fe.promiseConstructor=Promise;function kt(i){let t=i.split(".");if(t.length!==3)throw new G("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Zr.test(t[r]))throw new G("JWT not in base64url format");return{header:JSON.parse(Yt(t[0])),payload:JSON.parse(Yt(t[1])),signature:as(t[2]),raw:{header:t[0],payload:t[1]}}}function fs(i){return h(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),i)})})}function ps(i,t){return new Promise((r,s)=>{h(this,null,function*(){for(let n=0;n<1/0;n++)try{let o=yield i(n);if(!t(n,null,o)){r(o);return}}catch(o){if(!t(n,o)){s(o);return}}})})}function hi(i){return("0"+i.toString(16)).substr(-2)}function di(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,s="";for(let n=0;n<56;n++)s+=e.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,hi).join("")}function fi(i){return h(this,null,function*(){let e=new TextEncoder().encode(i),r=yield crypto.subtle.digest("SHA-256",e),s=new Uint8Array(r);return Array.from(s).map(n=>String.fromCharCode(n)).join("")})}function pi(i){return h(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;let e=yield fi(i);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function se(i,t,e=!1){return h(this,null,function*(){let r=di(),s=r;e&&(s+="/PASSWORD_RECOVERY"),yield Qt(i,`${t}-code-verifier`,s);let n=yield pi(r);return[n,r===n?"plain":"s256"]})}var mi=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ms(i){let t=i.headers.get(Me);if(!t||!t.match(mi))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function gs(i){if(!i)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(i<=t)throw new Error("JWT has expired")}function _s(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var gi=function(i,t){var e={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.indexOf(r)<0&&(e[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(i);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(i,r[s])&&(e[r[s]]=i[r[s]]);return e},ie=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),_i=[502,503,504];function vs(i){return h(this,null,function*(){var t;if(!ds(i))throw new we(ie(i),0);if(_i.includes(i.status))throw new we(ie(i),i.status);let e;try{e=yield i.json()}catch(n){throw new ve(ie(n),n)}let r,s=ms(i);if(s&&s.getTime()>=Xt["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?r=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(r=e.error_code),r){if(r==="weak_password")throw new qe(ie(e),i.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new j}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0))throw new qe(ie(e),i.status,e.weak_password.reasons);throw new yt(ie(e),i.status||500,r)})}var vi=(i,t,e,r)=>{let s={method:i,headers:t?.headers||{}};return i==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),e))};function g(i,t,e,r){return h(this,null,function*(){var s;let n=Object.assign({},r?.headers);n[Me]||(n[Me]=Xt["2024-01-01"].name),r?.jwt&&(n.Authorization=`Bearer ${r.jwt}`);let o=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield yi(i,t,e+a,{headers:n,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}})}function yi(i,t,e,r,s,n){return h(this,null,function*(){let o=vi(t,r,s,n),a;try{a=yield i(e,Object.assign({},o))}catch(l){throw console.error(l),new we(ie(l),0)}if(a.ok||(yield vs(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield vs(l)}})}function K(i){var t;let e=null;wi(i)&&(e=Object.assign({},i),i.expires_at||(e.expires_at=cs(i.expires_in)));let r=(t=i.user)!==null&&t!==void 0?t:i;return{data:{session:e,user:r},error:null}}function Zt(i){let t=K(i);return!t.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=i.weak_password),t}function M(i){var t;return{data:{user:(t=i.user)!==null&&t!==void 0?t:i},error:null}}function ys(i){return{data:i,error:null}}function ws(i){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:s,verification_type:n}=i,o=gi(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:s,verification_type:n},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function bs(i){return i}function wi(i){return i.access_token&&i.refresh_token&&i.expires_in}var bi=function(i,t){var e={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.indexOf(r)<0&&(e[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(i);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(i,r[s])&&(e[r[s]]=i[r[s]]);return e},be=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=bt(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(t,e="global"){return h(this,null,function*(){try{return yield g(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(m(r))return{data:null,error:r};throw r}})}inviteUserByEmail(r){return h(this,arguments,function*(t,e={}){try{return yield g(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:M})}catch(s){if(m(s))return{data:{user:null},error:s};throw s}})}generateLink(t){return h(this,null,function*(){try{let{options:e}=t,r=bi(t,["options"]),s=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),yield g(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:ws,redirectTo:e?.redirectTo})}catch(e){if(m(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return h(this,null,function*(){try{return yield g(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:M})}catch(e){if(m(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return h(this,null,function*(){var e,r,s,n,o,a,l;try{let c={nextPage:null,lastPage:0,total:0},u=yield g(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(n=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:""},xform:bs});if(u.error)throw u.error;let d=yield u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(y=>{let _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);c[`${v}Page`]=_}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(m(c))return{data:{users:[]},error:c};throw c}})}getUserById(t){return h(this,null,function*(){try{return yield g(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:M})}catch(e){if(m(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return h(this,null,function*(){try{return yield g(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:M})}catch(r){if(m(r))return{data:{user:null},error:r};throw r}})}deleteUser(t,e=!1){return h(this,null,function*(){try{return yield g(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:M})}catch(r){if(m(r))return{data:{user:null},error:r};throw r}})}_listFactors(t){return h(this,null,function*(){try{let{data:e,error:r}=yield g(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:e,error:r}}catch(e){if(m(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return h(this,null,function*(){try{return{data:yield g(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(m(e))return{data:null,error:e};throw e}})}};var ks={getItem:i=>V()?globalThis.localStorage.getItem(i):null,setItem:(i,t)=>{V()&&globalThis.localStorage.setItem(i,t)},removeItem:i=>{V()&&globalThis.localStorage.removeItem(i)}};function er(i={}){return{getItem:t=>i[t]||null,setItem:(t,e)=>{i[t]=e},removeItem:t=>{delete i[t]}}}function xs(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var ne={debug:!!(globalThis&&V()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},He=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},xt=class extends He{};function tr(i,t,e){return h(this,null,function*(){ne.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ne.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(i,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},s=>h(this,null,function*(){if(s){ne.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,s.name);try{return yield e()}finally{ne.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,s.name)}}else{if(t===0)throw ne.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new xt(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(ne.debug)try{let n=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}})))})}xs();var ki={url:Xr,storageKey:Yr,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Qr,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function Es(i,t,e){return h(this,null,function*(){return yield e()})}var rr=(()=>{class i{constructor(e){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=i.nextInstanceID,i.nextInstanceID+=1,this.instanceID>0&&I()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let n=Object.assign(Object.assign({},ki),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new be({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=bt(n.fetch),this.lock=n.lock||Es,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:I()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=tr:this.lock=Es,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:V()?this.storage=ks:(this.memoryStorage={},this.storage=er(this.memoryStorage)):(this.memoryStorage={},this.storage=er(this.memoryStorage)),I()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",o=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${gt}) ${new Date().toISOString()}`,...e),this}initialize(){return h(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return h(this,null,function*(){var e;try{let r=hs(window.location.href),s="none";if(this._isImplicitGrantCallback(r)?s="implicit":(yield this._isPKCECallback(r))&&(s="pkce"),I()&&this.detectSessionInUrl&&s!=="none"){let{data:n,error:o}=yield this._getSessionFromURL(r,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),ss(o)){let c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return yield this._removeSession(),{error:o}}let{session:a,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),yield this._saveSession(a),setTimeout(()=>h(this,null,function*(){l==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return m(r)?{error:r}:{error:new ve("Unexpected error during initialization",r)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return h(this,null,function*(){var r,s,n;try{let o=yield g(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e?.options)===null||n===void 0?void 0:n.captchaToken}},xform:K}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(m(o))return{data:{user:null,session:null},error:o};throw o}})}signUp(e){return h(this,null,function*(){var r,s,n;try{let o;if("email"in e){let{email:d,password:p,options:f}=e,y=null,_=null;this.flowType==="pkce"&&([y,_]=yield se(this.storage,this.storageKey)),o=yield g(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:p,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:y,code_challenge_method:_},xform:K})}else if("phone"in e){let{phone:d,password:p,options:f}=e;o=yield g(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(s=f?.data)!==null&&s!==void 0?s:{},channel:(n=f?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:K})}else throw new ee("You must provide either an email or phone number and a password");let{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(m(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(e){return h(this,null,function*(){try{let r;if("email"in e){let{email:o,password:a,options:l}=e;r=yield g(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Zt})}else if("phone"in e){let{phone:o,password:a,options:l}=e;r=yield g(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Zt})}else throw new ee("You must provide either an email or phone number and a password");let{data:s,error:n}=r;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new ye}:(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(m(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(e){return h(this,null,function*(){var r,s,n,o;return yield this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(e){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(e)}))})}_exchangeCodeForSession(e){return h(this,null,function*(){let r=yield Be(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{let{data:o,error:a}=yield g(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:K});if(yield Je(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new ye}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:a})}catch(o){if(m(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}})}signInWithIdToken(e){return h(this,null,function*(){try{let{options:r,provider:s,token:n,access_token:o,nonce:a}=e,l=yield g(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:K}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ye}:(c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(m(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(e){return h(this,null,function*(){var r,s,n,o,a;try{if("email"in e){let{email:l,options:c}=e,u=null,d=null;this.flowType==="pkce"&&([u,d]=yield se(this.storage,this.storageKey));let{error:p}=yield g(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){let{phone:l,options:c}=e,{data:u,error:d}=yield g(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c?.data)!==null&&n!==void 0?n:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new ee("You must provide either an email or phone number.")}catch(l){if(m(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(e){return h(this,null,function*(){var r,s;try{let n,o;"options"in e&&(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);let{data:a,error:l}=yield g(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:K});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,u=a.user;return c?.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(m(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithSSO(e){return h(this,null,function*(){var r,s,n;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=yield se(this.storage,this.storageKey)),yield g(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:ys})}catch(o){if(m(o))return{data:null,error:o};throw o}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){let{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new j;let{error:n}=yield g(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}}))}catch(e){if(m(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return h(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in e){let{email:s,type:n,options:o}=e,{error:a}=yield g(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:s,type:n,options:o}=e,{data:a,error:l}=yield g(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new ee("You must provide either an email or phone number and a type")}catch(r){if(m(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(r=>h(this,null,function*(){return r}))}))})}_acquireLock(e,r){return h(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=h(this,null,function*(){return yield s,yield r()});return this.pendingInLock.push(h(this,null,function*(){try{yield n}catch{}})),n}return yield this.lock(`lock:${this.storageKey}`,e,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let s=r();for(this.pendingInLock.push(h(this,null,function*(){try{yield s}catch{}})),yield s;this.pendingInLock.length;){let n=[...this.pendingInLock];yield Promise.all(n),this.pendingInLock.splice(0,n.length)}return yield s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return h(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield e(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=yield Be(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let s=e.expires_at?e.expires_at*1e3-Date.now()<vt:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}let{session:n,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return h(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return h(this,null,function*(){try{return e?yield g(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:M}):yield this._useSession(r=>h(this,null,function*(){var s,n,o;let{data:a,error:l}=r;if(l)throw l;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new j}:yield g(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:M})}))}catch(r){if(m(r))return rs(r)&&(yield this._removeSession(),yield Je(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}})}updateUser(s){return h(this,arguments,function*(e,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(e,r)}))})}_updateUser(s){return h(this,arguments,function*(e,r={}){try{return yield this._useSession(n=>h(this,null,function*(){let{data:o,error:a}=n;if(a)throw a;if(!o.session)throw new j;let l=o.session,c=null,u=null;this.flowType==="pkce"&&e.email!=null&&([c,u]=yield se(this.storage,this.storageKey));let{data:d,error:p}=yield g(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:l.access_token,xform:M});if(p)throw p;return l.user=d.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}}))}catch(n){if(m(n))return{data:{user:null},error:n};throw n}})}setSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return h(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new j;let r=Date.now()/1e3,s=r,n=!0,o=null,{payload:a}=kt(e.access_token);if(a.exp&&(s=a.exp,n=s<=r),n){let{session:l,error:c}=yield this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{let{data:l,error:c}=yield this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(m(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;if(!e){let{data:a,error:l}=r;if(l)throw l;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new j;let{session:n,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(m(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(e,r){return h(this,null,function*(){try{if(!I())throw new te("No browser detected.");if(e.error||e.error_description||e.error_code)throw new te(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ne("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new te("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ne("No code detected.");let{data:N,error:P}=yield this._exchangeCodeForSession(e.code);if(P)throw P;let q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:N.session,redirectType:null},error:null}}let{provider_token:s,provider_refresh_token:n,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=e;if(!o||!l||!a||!u)throw new te("No session defined in URL");let d=Math.round(Date.now()/1e3),p=parseInt(l),f=d+p;c&&(f=parseInt(c));let y=f-d;y*1e3<=Z&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);let _=f-p;d-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,f,d):d-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,f,d);let{data:v,error:T}=yield this._getUser(o);if(T)throw T;let D={provider_token:s,provider_refresh_token:n,access_token:o,expires_in:p,expires_at:f,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:e.type},error:null}}catch(s){if(m(s))return{data:{session:null,redirectType:null},error:s};throw s}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return h(this,null,function*(){let r=yield Be(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)})}signOut(){return h(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return h(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(r=>h(this,null,function*(){var s;let{data:n,error:o}=r;if(o)return{error:o};let a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){let{error:l}=yield this.admin.signOut(a,e);if(l&&!(ts(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(yield this._removeSession(),yield Je(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){let r=us(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:s}}}_emitInitialSession(e){return h(this,null,function*(){return yield this._useSession(r=>h(this,null,function*(){var s,n;try{let{data:{session:o},error:a}=r;if(a)throw a;yield(s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){yield(n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}}))})}resetPasswordForEmail(s){return h(this,arguments,function*(e,r={}){let n=null,o=null;this.flowType==="pkce"&&([n,o]=yield se(this.storage,this.storageKey,!0));try{return yield g(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(m(a))return{data:null,error:a};throw a}})}getUserIdentities(){return h(this,null,function*(){var e;try{let{data:r,error:s}=yield this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(m(r))return{data:null,error:r};throw r}})}linkIdentity(e){return h(this,null,function*(){var r;try{let{data:s,error:n}=yield this._useSession(o=>h(this,null,function*(){var a,l,c,u,d;let{data:p,error:f}=o;if(f)throw f;let y=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield g(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})}));if(n)throw n;return I()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(m(s))return{data:{provider:e.provider,url:null},error:s};throw s}})}unlinkIdentity(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s,n;let{data:o,error:a}=r;if(a)throw a;return yield g(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})}))}catch(r){if(m(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return h(this,null,function*(){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let s=Date.now();return yield ps(n=>h(this,null,function*(){return n>0&&(yield fs(200*Math.pow(2,n-1))),this._debug(r,"refreshing attempt",n),yield g(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:K})}),(n,o)=>{let a=200*Math.pow(2,n);return o&&wt(o)&&Date.now()+a-s<Z})}catch(s){if(this._debug(r,"error",s),m(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){return h(this,null,function*(){let s=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),I()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var e;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let s=yield Be(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&(yield this._removeSession());return}let n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<vt;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${vt}s`),n){if(this.autoRefreshToken&&s.refresh_token){let{error:o}=yield this._callRefreshToken(s.refresh_token);o&&(console.error(o),wt(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}})}_callRefreshToken(e){return h(this,null,function*(){var r,s;if(!e)throw new j;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Fe;let{data:o,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new j;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(n,"error",o),m(o)){let a={session:null,error:o};return wt(o)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}})}_notifyAllSubscribers(e,r,s=!0){return h(this,null,function*(){let n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(l=>h(this,null,function*(){try{yield l.callback(e,r)}catch(c){o.push(c)}}));if(yield Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(n,"end")}})}_saveSession(e){return h(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield Qt(this.storage,this.storageKey,e)})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield Je(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&I()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),Z);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(r=>h(this,null,function*(){let{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let n=Math.floor((s.expires_at*1e3-e)/Z);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Z}ms, refresh threshold is ${_t} ticks`),n<=_t&&(yield this._callRefreshToken(s.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof He)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!I()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return h(this,null,function*(){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,r,s){return h(this,null,function*(){let n=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){let[o,a]=yield se(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(l.toString())}if(s?.queryParams){let o=new URLSearchParams(s.queryParams);n.push(o.toString())}return s?.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`})}_unenroll(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;let{data:n,error:o}=r;return o?{data:null,error:o}:yield g(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token})}))}catch(r){if(m(r))return{data:null,error:r};throw r}})}_enroll(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s,n;let{data:o,error:a}=r;if(a)return{data:null,error:a};let l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=yield g(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=c?.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}))}catch(r){if(m(r))return{data:null,error:r};throw r}})}_verify(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;let{data:n,error:o}=r;if(o)return{data:null,error:o};let{data:a,error:l}=yield g(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})}))}catch(r){if(m(r))return{data:null,error:r};throw r}}))})}_challenge(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;let{data:n,error:o}=r;return o?{data:null,error:o}:yield g(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n?.session)===null||s===void 0?void 0:s.access_token})}))}catch(r){if(m(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(e){return h(this,null,function*(){let{data:r,error:s}=yield this._challenge({factorId:e.factorId});return s?{data:null,error:s}:yield this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})})}_listFactors(){return h(this,null,function*(){let{data:{user:e},error:r}=yield this.getUser();if(r)return{data:null,error:r};let s=e?.factors||[],n=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:n,phone:o},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(e=>h(this,null,function*(){var r,s;let{data:{session:n},error:o}=e;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=kt(n.access_token),l=null;a.aal&&(l=a.aal);let c=l;((s=(r=n.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");let d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}))})}fetchJwk(s){return h(this,arguments,function*(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n||(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+es>Date.now()))return n;let{data:o,error:a}=yield g(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!o.keys||o.keys.length===0)throw new G("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),n=o.keys.find(l=>l.kid===e),!n)throw new G("No matching signing key found in JWKS");return n})}getClaims(s){return h(this,arguments,function*(e,r={keys:[]}){try{let n=e;if(!n){let{data:_,error:v}=yield this.getSession();if(v||!_.session)return{data:null,error:v};n=_.session.access_token}let{header:o,payload:a,signature:l,raw:{header:c,payload:u}}=kt(n);if(gs(a.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){let{error:_}=yield this.getUser(n);if(_)throw _;return{data:{claims:a,header:o,signature:l},error:null}}let d=_s(o.alg),p=yield this.fetchJwk(o.kid,r),f=yield crypto.subtle.importKey("jwk",p,d,!0,["verify"]);if(!(yield crypto.subtle.verify(d,f,l,ls(`${c}.${u}`))))throw new G("Invalid JWT signature");return{data:{claims:a,header:o,signature:l},error:null}}catch(n){if(m(n))return{data:null,error:n};throw n}})}}return i.nextInstanceID=0,i})();var xi=rr,sr=xi;var Et=class extends sr{constructor(t){super(t)}};var Ei=function(i,t,e,r){function s(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?n(u.value):s(u.value).then(a,l)}c((r=r.apply(i,t||[])).next())})},St=class{constructor(t,e,r){var s,n,o;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=Kr(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:Hr,realtime:Wr,auth:Object.assign(Object.assign({},zr),{storageKey:l}),global:Jr},u=Vr(r??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(n=u.global.headers)!==null&&n!==void 0?n:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Gr(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Rr(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Ee(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Le(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return Ei(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,storageKey:n,flowType:o,lock:a,debug:l},c,u){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Et({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:n,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Ie(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Tt=(i,t,e)=>new St(i,t,e);var ke={production:!0,apiUrl:"https://gkixcqhhocdmtcugjhsz.supabase.co",publicAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdraXhjcWhob2NkbXRjdWdqaHN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUwOTc4MzMsImV4cCI6MjA2MDY3MzgzM30.6ytQLGqAIKNyXY7-lrk27J7spysBJUht3gDWXQ2a0bI"};var oe=class{id;nombre;apellido;fecha_nacimiento;email};var Ct=Tt(ke.apiUrl,ke.publicAnonKey),At=class i{constructor(t,e){this.router=t;this.modalService=e}email="";password="";usuario=new oe;ingresar(){return h(this,null,function*(){this.validarDatosIngreso()?(yield this.emailYaRegistrado())&&(yield this.login(),yield this.getUsuarioId(),yield this.guardarLog(),this.goTo("home")):this.mostrarError("Hay datos incorrectos.")})}validarDatosIngreso(){return!(this.email==null||this.password==null)}login(){return h(this,null,function*(){let{data:t,error:e}=yield Ct.auth.signInWithPassword({email:this.email,password:this.password});return e?(console.log(e.code),e.code==="validation_failed"?this.mostrarError("El mail no es valido."):e.code==="invalid_credentials"?this.mostrarError("El mail o la contrase\xF1a son incorrectos."):e.code==="email_not_confirmed"?this.mostrarError("El mail no fue validado."):this.mostrarError(`A ocurrido un error.
Intente denuevo mas tarde`),!1):(this.usuario.id=t.user.id,!0)})}getUsuarioId(){return h(this,null,function*(){let{data:t,error:e}=yield Ct.from("usuarios").select("*").eq("id",this.usuario.id).single();return e?(this.mostrarError(`Problema accediendo a la base de datos.
Intente denuevo mas tarde`),!1):t===null?(this.mostrarError("No se encontro el usuario"),!1):(this.usuario=Object.assign(new oe,t),!0)})}guardarLog(){return h(this,null,function*(){let{data:t,error:e}=yield Ct.from("log").insert([{id_usuario:this.usuario.id}]);return e?(this.mostrarError(`Problema accediendo a la base de datos.
Intente denuevo mas tarde`),!1):!0})}emailYaRegistrado(){return h(this,null,function*(){let{data:t,error:e}=yield Ct.from("usuarios").select("id").eq("email",this.email).maybeSingle();return e?(this.mostrarError(`Problema accediendo a la base de datos.
Intente denuevo mas tarde`),!1):t===null?(this.mostrarError("El usuario no se encuentra registrado"),!1):!0})}mostrarError(t){let e=this.modalService.open(ue,{centered:!0,backdrop:"static",keyboard:!1,windowClass:"custom-modal-style"});e.componentInstance.titulo="Error en el Login",e.componentInstance.mensaje=t}goTo(t){this.router.navigate([t])}autocompletar(){this.email="santi.lopez8846@gmail.com",this.password="123456"}static \u0275fac=function(e){return new(e||i)(B(ce),B(Ze))};static \u0275cmp=le({type:i,selectors:[["app-login"]],standalone:!1,decls:19,vars:2,consts:[[1,"form-container"],[1,"form-box"],[1,"form-title"],[1,"mb-3"],["for","email",1,"form-label","label-color"],["type","email","id","email","name","email",1,"form-control","input-custom",3,"ngModelChange","ngModel"],["for","password",1,"form-label","label-color"],["type","password","id","password","name","password",1,"form-control","input-custom",3,"ngModelChange","ngModel"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-ingresar",3,"click"],["type","button",1,"btn","btn-registrarse-outline",3,"click"],["type","button",1,"btn","btn-autocompletar-outline",3,"click"]],template:function(e,r){e&1&&(w(0,"div",0)(1,"form",1)(2,"h2",2),x(3,"Iniciar sesi\xF3n"),b(),w(4,"div",3)(5,"label",4),x(6,"Correo electr\xF3nico"),b(),w(7,"input",5),z("ngModelChange",function(n){return H(r.email,n)||(r.email=n),n}),b()(),w(8,"div",3)(9,"label",6),x(10,"Contrase\xF1a"),b(),w(11,"input",7),z("ngModelChange",function(n){return H(r.password,n)||(r.password=n),n}),b()(),w(12,"div",8)(13,"button",9),$("click",function(){return r.ingresar()}),x(14," Ingresar "),b(),w(15,"button",10),$("click",function(){return r.goTo("auth/registro")}),x(16," Registrarse "),b(),w(17,"button",11),$("click",function(){return r.autocompletar()}),x(18," Autocompletar "),b()()()()),e&2&&(O(7),J("ngModel",r.email),O(4),J("ngModel",r.password))},dependencies:[Qe,Ge,Ke,Ve,Ye,Xe],styles:[".form-container[_ngcontent-%COMP%]{background-color:#010b15;min-height:100vh;display:flex;justify-content:center;align-items:center}.form-box[_ngcontent-%COMP%]{background-color:#09252c;color:#fff;min-width:320px;max-width:400px;width:100%;padding:1.5rem;border-radius:.5rem;box-shadow:0 .5rem 1rem #00000080;border:2px solid #51db84}.form-title[_ngcontent-%COMP%]{color:#51db84;text-align:center;margin-bottom:1.5rem}.label-color[_ngcontent-%COMP%]{color:#b39353}.input-custom[_ngcontent-%COMP%]{background-color:#1c4549;color:#fff;border:1px solid #51db84;outline:none}.input-custom[_ngcontent-%COMP%]:focus{outline:2px solid #b39353;border:1px solid #b39353}.btn-ingresar[_ngcontent-%COMP%]{background-color:#51db84;color:#010b15;border:2px solid #51db84;padding:.5rem 1.5rem;cursor:pointer;border-radius:.25rem;transition:all .3s ease}.btn-ingresar[_ngcontent-%COMP%]:hover{background-color:#b39353;color:#010b15;border:2px solid #b39353;transform:scale(1.05)}.btn-registrarse-outline[_ngcontent-%COMP%]{background-color:transparent;color:#51db84;border:1px solid #51db84;padding:.5rem 1.5rem;cursor:pointer;border-radius:.25rem;transition:all .3s ease}.btn-registrarse-outline[_ngcontent-%COMP%]:hover{background-color:#b39353;color:#010b15;border:1px solid #b39353;transform:scale(1.05)}.btn-autocompletar-outline[_ngcontent-%COMP%]{background-color:#b39353;color:#010b15;border:1px solid #b39353;padding:.5rem 1.5rem;cursor:pointer;border-radius:.25rem;transition:all .3s ease;font-weight:500}.btn-autocompletar-outline[_ngcontent-%COMP%]:hover{background-color:#51db84;color:#010b15;border:1px solid #51db84;transform:scale(1.05)}"]})};var Ot=Tt(ke.apiUrl,ke.publicAnonKey),Rt=class i{constructor(t,e){this.router=t;this.modalService=e}nombre;apellido;fecha_nacimiento;email="";password="";usuario=new oe;registrarUsuario(){return h(this,null,function*(){if(this.validarDatosRegistro()){if(yield this.emailNoRegistrado()){let t=yield this.registrarAuth();t&&(yield this.guardarDatosTablaUsuario(t),yield this.guardarLog(),this.goTo("home"))}}else this.mostrarError("Hay datos incorrectos.")})}validarDatosRegistro(){if(this.nombre!=null)this.nombre=this.capitalizar(this.nombre);else return!1;if(this.apellido!=null)this.apellido=this.capitalizar(this.apellido);else return!1;return!(this.fecha_nacimiento==null||this.email==null||this.password==null)}registrarAuth(){return h(this,null,function*(){let{data:t,error:e}=yield Ot.auth.signUp({email:this.email,password:this.password});return e?(console.log(e.code),e.code==="weak_password"?this.mostrarError("La contrase\xF1a debe tener al menos 6 caracteres."):e.code==="validation_failed"?this.mostrarError("El mail no es valido."):e.code==="over_email_send_rate_limit"?this.mostrarError(`Ha intentado muchas veces.
Intente denuevo mas tarde`):this.mostrarError(`A ocurrido un error.
Intente denuevo mas tarde`),!1):t.user})}guardarDatosTablaUsuario(t){return h(this,null,function*(){let{data:e,error:r}=yield Ot.from("usuarios").insert([{id:t.id,nombre:this.nombre,apellido:this.apellido,email:this.email,fecha_nacimiento:this.fecha_nacimiento}]);return r?(console.log(r),this.mostrarError(`Problema accediendo a la base de datos.
Intente denuevo mas tarde`),!1):(this.usuario.id=t.id,this.usuario.nombre=this.nombre,this.usuario.apellido=this.apellido,this.usuario.fecha_nacimiento=this.fecha_nacimiento,this.usuario.email=this.email,!0)})}guardarLog(){return h(this,null,function*(){let{data:t,error:e}=yield Ot.from("log").insert([{id_usuario:this.usuario.id}]);return e?(this.mostrarError(`Problema accediendo a la base de datos.
Intente denuevo mas tarde`),!1):!0})}emailNoRegistrado(){return h(this,null,function*(){let{data:t,error:e}=yield Ot.from("usuarios").select("id").eq("email",this.email).maybeSingle();return e?(this.mostrarError(`Problema accediendo a la base de datos.
Intente denuevo mas tarde`),!1):t!==null?(this.mostrarError("El usuario ya se encuentra registrado"),!1):!0})}mostrarError(t){let e=this.modalService.open(ue,{centered:!0,backdrop:"static",keyboard:!1,windowClass:"custom-modal-style"});e.componentInstance.titulo="Error en el Registro",e.componentInstance.mensaje=t}capitalizar(t){return t[0].toUpperCase()+t.slice(1).toLowerCase()}goTo(t){this.router.navigate([t])}static \u0275fac=function(e){return new(e||i)(B(ce),B(Ze))};static \u0275cmp=le({type:i,selectors:[["app-registro"]],standalone:!1,decls:29,vars:5,consts:[[1,"form-container"],[1,"form-box"],[1,"form-title"],[1,"mb-3"],["for","nombre",1,"form-label","label-color"],["type","text","id","nombre","name","nombre",1,"form-control","input-custom",3,"ngModelChange","ngModel"],["for","apellido",1,"form-label","label-color"],["type","text","id","apellido","name","apellido",1,"form-control","input-custom",3,"ngModelChange","ngModel"],["for","fechaNacimiento",1,"form-label","label-color"],["type","date","id","fechaNacimiento","name","fechaNacimiento",1,"form-control","input-custom",3,"ngModelChange","ngModel"],["for","email",1,"form-label","label-color"],["type","email","id","email","name","email",1,"form-control","input-custom",3,"ngModelChange","ngModel"],["for","password",1,"form-label","label-color"],["type","password","id","password","name","password",1,"form-control","input-custom",3,"ngModelChange","ngModel"],[1,"d-grid","gap-2","mt-3"],["type","button",1,"btn","btn-registrarse",3,"click"],["type","button",1,"btn","btn-volver-login",3,"click"]],template:function(e,r){e&1&&(w(0,"div",0)(1,"form",1)(2,"h2",2),x(3,"REGISTRO"),b(),w(4,"div",3)(5,"label",4),x(6,"Nombre"),b(),w(7,"input",5),z("ngModelChange",function(n){return H(r.nombre,n)||(r.nombre=n),n}),b()(),w(8,"div",3)(9,"label",6),x(10,"Apellido"),b(),w(11,"input",7),z("ngModelChange",function(n){return H(r.apellido,n)||(r.apellido=n),n}),b()(),w(12,"div",3)(13,"label",8),x(14,"Fecha de nacimiento"),b(),w(15,"input",9),z("ngModelChange",function(n){return H(r.fecha_nacimiento,n)||(r.fecha_nacimiento=n),n}),b()(),w(16,"div",3)(17,"label",10),x(18,"Correo electr\xF3nico"),b(),w(19,"input",11),z("ngModelChange",function(n){return H(r.email,n)||(r.email=n),n}),b()(),w(20,"div",3)(21,"label",12),x(22,"Contrase\xF1a"),b(),w(23,"input",13),z("ngModelChange",function(n){return H(r.password,n)||(r.password=n),n}),b()(),w(24,"div",14)(25,"button",15),$("click",function(){return r.registrarUsuario()}),x(26," Registrarse "),b(),w(27,"button",16),$("click",function(){return r.goTo("auth/login")}),x(28," Volver al login "),b()()()()),e&2&&(O(7),J("ngModel",r.nombre),O(4),J("ngModel",r.apellido),O(4),J("ngModel",r.fecha_nacimiento),O(4),J("ngModel",r.email),O(4),J("ngModel",r.password))},dependencies:[Qe,Ge,Ke,Ve,Ye,Xe],styles:[".form-container[_ngcontent-%COMP%]{background-color:#010b15;min-height:100vh;display:flex;justify-content:center;align-items:center}.form-box[_ngcontent-%COMP%]{background-color:#09252c;color:#fff;min-width:320px;max-width:400px;width:100%;padding:1.5rem;border-radius:.5rem;box-shadow:0 .5rem 1rem #00000080;border:2px solid #51db84}.form-title[_ngcontent-%COMP%]{color:#51db84;text-align:center;margin-bottom:1.5rem}.label-color[_ngcontent-%COMP%]{color:#b39353}.input-custom[_ngcontent-%COMP%]{background-color:#1c4549;color:#fff;border:1px solid #51db84}.input-custom[_ngcontent-%COMP%]:focus{outline:2px solid #b39353;border:1px solid #b39353}.btn-registrarse[_ngcontent-%COMP%]{background-color:#51db84;color:#010b15;border:none;padding:.5rem 1.5rem;cursor:pointer;border-radius:.25rem;transition:all .3s ease}.btn-registrarse[_ngcontent-%COMP%]:hover{background-color:#b39353;color:#010b15;transform:scale(1.05)}.btn-volver-login[_ngcontent-%COMP%]{background-color:transparent;color:#51db84;border:1px solid #51db84;padding:.5rem 1.5rem;width:100%;cursor:pointer;border-radius:.25rem;transition:all .3s ease}.btn-volver-login[_ngcontent-%COMP%]:hover{background-color:#b39353;color:#010b15;border-color:#b39353;transform:scale(1.05)}"]})};var Ti=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:At},{path:"registro",component:Rt}],jt=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=We({type:i});static \u0275inj=ze({imports:[Pt.forChild(Ti),Pt]})};var Ss=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=We({type:i});static \u0275inj=ze({imports:[or,jt,cr,ar]})};export{Ss as AuthModule};
